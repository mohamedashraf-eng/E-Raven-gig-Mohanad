<!-- cms/templates/cms/user_profile_edit.html -->

{% extends "base.html" %}
{% load static %}
{% block title %}Edit Profile - ERaven Gigs{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="mb-4 text-center text-primary">Edit Profile</h1>

    <!-- Navbar with Tabs -->
    <ul class="nav nav-tabs mb-4" id="editProfileTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="personal-data-tab" data-bs-toggle="tab" data-bs-target="#personal-data" type="button" role="tab" aria-controls="personal-data" aria-selected="true">
                <i class="fas fa-user-edit me-1"></i> Personal Data
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="security-tab" data-bs-toggle="tab" data-bs-target="#security" type="button" role="tab" aria-controls="security" aria-selected="false">
                <i class="fas fa-lock me-1"></i> Security
            </button>
        </li>
    </ul>

    <div class="tab-content" id="editProfileTabContent">
        <!-- Personal Data Tab -->
        <div class="tab-pane fade show active" id="personal-data" role="tabpanel" aria-labelledby="personal-data-tab">
            <div class="card mb-4 shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0">Edit Personal Data</h3>
                </div>
                <div class="card-body">
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="firstName" class="form-label"><strong>First Name</strong></label>
                                <input type="text" class="form-control" id="firstName" name="first_name" value="{{ user.first_name }}" required>
                            </div>
                            <div class="col-md-6">
                                <label for="lastName" class="form-label"><strong>Last Name</strong></label>
                                <input type="text" class="form-control" id="lastName" name="last_name" value="{{ user.last_name }}" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label"><strong>Email</strong></label>
                            <input type="email" class="form-control" id="email" name="email" value="{{ user.email }}" required>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="role" class="form-label"><strong>Role</strong></label>
                                <input type="text" class="form-control" id="role" value="{% if user.role %}{{ user.role.name }}{% else %}No Role Assigned{% endif %}" readonly>
                            </div>
                            <div class="col-md-6">
                                <label for="level" class="form-label"><strong>Level</strong></label>
                                <input type="text" class="form-control" id="level" value="{{ user.level }}" readonly>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary mt-3">Save Changes</button>
                        <a href="{% url 'user_profile' %}" class="btn btn-secondary mt-3">Cancel</a>
                    </form>
                </div>
            </div>
        </div>

        <!-- Security Tab -->
        <div class="tab-pane fade" id="security" role="tabpanel" aria-labelledby="security-tab">
            <div class="card mb-4 shadow-sm">
                <div class="card-header bg-warning text-dark">
                    <h3 class="mb-0">Update Security Settings</h3>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}
                        <div class="mb-3">
                            <label for="currentPassword" class="form-label"><strong>Current Password</strong></label>
                            <input type="password" class="form-control" id="currentPassword" name="current_password" required>
                        </div>
                        <div class="mb-3">
                            <label for="newPassword" class="form-label"><strong>New Password</strong></label>
                            <input type="password" class="form-control" id="newPassword" name="new_password" required>
                        </div>
                        <div class="mb-3">
                            <label for="confirmPassword" class="form-label"><strong>Confirm Password</strong></label>
                            <input type="password" class="form-control" id="confirmPassword" name="confirm_password" required>
                        </div>
                        <button type="submit" class="btn btn-primary mt-3">Update Password</button>
                        <a href="{% url 'user_profile' %}" class="btn btn-secondary mt-3">Cancel</a>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Include Font Awesome for Icons -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

<!-- Include Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Link to External CSS -->
<link href="{% static 'css/user_profile.css' %}" rel="stylesheet" />
{% endblock %}
