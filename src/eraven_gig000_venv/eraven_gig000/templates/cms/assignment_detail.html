<!-- cms/templates/cms/assignment_detail.html -->

{% extends "base.html" %}

{% block title %}{{ assignment.title }} - ERaven Gigs{% endblock %}

{% block content %}
    <h1>{{ assignment.title }}</h1>
    <p><strong>Description:</strong> {{ assignment.description }}</p>
    <p><strong>Due Date:</strong> {{ assignment.due_date|date:"M d, Y H:i" }}</p>
    <hr>
    <h3>Your Submissions</h3>
    {% if submissions %}
        <ul class="list-group mb-3">
            {% for submission in submissions %}
                <li class="list-group-item">
                    <p><strong>Submitted At:</strong> {{ submission.submitted_at|date:"M d, Y H:i" }}</p>
                    <p><strong>Content:</strong> {{ submission.content|linebreaks }}</p>
                    <p><strong>Grade:</strong> {{ submission.grade|default:"Not graded yet" }}</p>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>You have not submitted this assignment yet.</p>
    {% endif %}
    <hr>
    <h3>Submit Assignment</h3>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn btn-success">Submit</button>
    </form>
    <a href="{% url 'cms:assignment_list' course.slug %}" class="btn btn-primary mt-3">Back to Assignments</a>
{% endblock %}
